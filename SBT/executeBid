<!DOCTYPE html>
<html>
  <head>
    <title>Execute Bid Utility</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300|Roboto:300i" rel="stylesheet">

    <script type="text/javascript" src="bundle/bidUtil_TIMESTAMP_1512002773_.js"></script>
    <script type="text/javascript" src="bundle/ether_TIMESTAMP_1512002773_.js"></script>

    <!--
	little bit of javascript for modal
      -->
    <script>
      window.onload = function() {
        var modal = document.getElementById('infoModal');
        var importantInfobtn = document.getElementById('importantInfoButton');
        var span = document.getElementsByClassName("close")[0];
        // When the user clicks on the info button, open the modal
        importantInfobtn.onclick = function() {  modal.style.display = "block"; }
        // When the user clicks on close, close the modal
        span.onclick = function() { modal.style.display = "none"; }
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal)
          modal.style.display = "none";
        }
      };
    </script>
  </head>

  <body>


    <!--
	modal for important information
      -->
    <div id="infoModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
	<span class="close">&times;</span>
	<p>
	  <h2>Notes:</h2>
	  <ul style="list-style-type: circle;">
	    <li>
	      <h3>If the auction strike-price is higher than the maximum price that you specified, then you will not receive any tokens; your entire deposit will be refunded to you.</h3>
	    </li>
	    <li>
	      <h3>If the auction strike-price is lower than the maximum price that you specified, then you will receive the the number of tokens that you specified (Quantity); you will also receive a refund for the difference between the strike-price and the price that you specified.</h3>
	    </li>
	    <li>
	      <h3>Your bid was initially submitted secretly. Your bid was hashed with a secret "Salt Code", which was generated by signing an arbitrary message. The hash of the bid information and the "Salt Code" is your "Bid Hash."</h3>
	    </li>
	    <li>
	      <h3>The "Salt Code" will be re-generated in the form below. The revealed Price and Quantity of your bid, and the Salt Code, will be sent to the Auction contract, when you execute your bid. </h3>
	    </li>
	    <li>
	      <h3>Use the form below to re-generate your "Salt Code; then click "REVEAL AND EXECUTE BID"</h3>
	    </li>
	    <li>
	      <h3>Your bid will be executed in two transactions:
		<br/>First your bid is revealed, and if it is greater than the strike-price, then tokens will be credted to your account.
		<br/>In the second transaction, any excess of your deposit over the strike-price (or your entire deposit, if your bid was below the strike-price) will be refunded to you.</h3>
	    </li>
	  </ul>
	</p>
      </div>
    </div>

    <div id="topSection">
      <table style="height: 315px;" width="100%">
	<tbody>
	  <tr>
	    <td><img src="" alt="Logo goes here " width="160px" height="160px"/></td>
	    <td>
	      <h1 style="text-align: center;">Utility to Reveal and Execute a Bid</h1>
	    </td>
	    <td>
	      <div style="float:right;">
		<img src="images/download-metamask.png" alt="Download MetaMask" width="300px" height="90px">
	      </div>
	      <h2>Purchasing tokens is a two-step process:</h2>
	      <ol style="list-style-type: upper-roman;">
		<li>
		  <h2>Generating and Submiting a Secret bid</h2>
		</li>
		<li>
		  <h2>Revealing and Executing the Bid after the Auction Period is Over</h2>
		</li>
	      </ol>
	    </td>
	  </tr>
	</tbody>
      </table>
    </div>
    <h2>This web page is the utility for revealing and executing a bid</h2>
    <div>
      <ol>
	<li>
	  <h2>In the Price field Enter price that you specified when you placed your secret bid (in ETH).</h2>
	</li>
	<li>
	  <h2>In the Quantity field enter the quantity that you specified in your secret bid</h2>
	</li>
      </ol>
      <!-- for important information modal -->
      <button id="importantInfoButton" type="button">Click here for important information</button>
      <div>
	<table width="100%">
	  <tr>
	    <td><div id="exeBidFormDiv"/></td>
	    <td><div id="exeBidResultsDiv"/></td>
	  </tr>
	</table>
      </div>
      <h2>Click REVEAL AND EXECUTE BID below to send your "Salt Code" and Revealed Bid (Price and Quantity), to the Auction Contract.</h2>
      <h3>Note: A &quot;request-refund&quot; transaction will be submitted automatically after the &quot;execute-bid&quot; transaction completes.
	<br/>Please wait for both transactions to complete!</h3>
      <button id="executeBidButton" type="button" class="formtable" disabled="true">REVEAL AND EXECUTE BID</button>
      <div id="executeStatusDiv" style="display: none;"></div>
      <div id="refundStatusDiv" style="display: none;"></div>
      <p>&nbsp;</p>
    </div>
  </body>
</html>
